# Go

- Google が開発したプログラミング言語です。
- 静的型付け、メモリ安全性、ガベージコレクションを備えるコンパイル言語です。
- シンプル、高速、メモリ効率が良い、メモリ破壊が無い、並行処理が得意などの特徴を備えています。
- メモリ破壊が無く、並行処理を得意とする、進化した C 言語という側面があります。

## 導入

ローカルにインストールする場合は以下のようにしてください。

```bash
brew install go # macos
```

## Hello World

Go の実行ファイルの拡張子は .go です。
Go をインストールした環境であれば単体で実行できます。

```bash
touch hello.go
```

```go
package main  // mainパッケージであることを宣言

import "fmt"  // fmtモジュールをインポート

func main() {  // 最初に実行されるmain()関数を定義
    fmt.Println("hello, world")
}
```

### 実行

直接実行する場合は以下のようにしてください。

```bash
go run hello.go
```

また、コンパイルして実行する場合は以下のようにしてください。
`go build` コマンドによってコンパイルを行い、実行ファイル `hello` が生成されます。

```bash
go build hello.go
./hello
```

## Go ツールチェーン

Go は標準で多くのツールを備えているのが特徴です。
Python ではコード品質の担保のために ruff, pytest, mypy などのツールを個別にインストールして使用しますが、Go では標準で以下のようなツールが備わっています。

- `go fmt <file/dir>`: コードのフォーマットを自動で整形するツール
- `go test <file/dir>`: 単体テストを実行するツール
- `go vet <file/dir>`: 静的解析を行い、コードの問題点を検出するツール
- `go mod <command>`: 依存関係を管理するツール
- `go doc <package>`: パッケージのドキュメントを表示するツール
- `go install <package>`: パッケージをインストールするツール
- `go build <package>`: コードをコンパイルして実行ファイルを生成するツール
- `go run <file>`: コードをコンパイルして即座に実行するツール

このように Go では標準の言語仕様として多くのツールが提供されているため、追加でツールをインストールする必要が少なく、環境構築が容易です。

## 依存管理

従来の Go では環境変数 `GOPATH` で定義したディレクトリ内にソースコードを配置する必要がありました。
しかし、2018 年にリリースされた Go 1.11 からはモジュール（module）という機能が導入され、任意の場所にソースコードを配置できるようになりました。

Python や Javascript では開発プロジェクトごとに依存管理のための設定ファイルとパッケージを配置するディレクトリが存在しますが、Go ではそういった概念がないのが特徴です。
Python の .venv や Javascript の node_modules のように、パッケージの実体をコピーすることはなく、マシン全体で共通して `$GOPATH/pkg/mod` にキャッシュされ、複数のプロジェクトで共有されます。プロジェクトごとに異なるバージョンのパッケージを使用したい場合でも後述の Go Modules によって適切なバージョンが参照されるようになっています。

### Go Modules

Go Modules は Go 1.11 で導入された依存管理の仕組みです。
Go Modules を使用することで、`$GOPATH` に依存せずにプロジェクトごとに依存関係を管理し、特定のバージョンのパッケージを使用できます。
Go Modules の詳細については、次のセクションで説明します。
