# AI Agent

2025.04 現在、GitHub Copilot からさらにアプリケーション開発のパラダイムは進歩している。
Cline という AI エージェントを利用してさらに AI が主体となってプログラムを書く技術にキャッチアップするため、
このディレクトリでは Cline を利用したアプリケーション開発の導入とその記録をまとめる。

## Cline とは

Cline とは VS Code の拡張機能として利用できる AI エージェントである。
詳細は以下のリンクを参照。

- [CLINE に全部賭けろ](https://zenn.dev/mizchi/articles/all-in-on-cline)
- [Cline に全部賭ける前に 〜Cline の動作原理を深掘り〜](https://zenn.dev/codeciao/articles/6d0a83e234a34a)

Cline 自体に AI が組み込まれているわけではなく、設定から利用する AI モデルの API Key を登録する必要がある。

## Cline を使えるようにするまで

### Google Gemini を利用する場合

- [Google AI Studio](https://aistudio.google.com) にアクセスし Google アカウントでサインインする
- 左上の「API キーを取得」をクリック
- 「API キーを作成」を選択し、「新しいプロジェクトで作成」を選択

### VS Code に Cline をインストールする

- VS Code を起動し、拡張機能を開く
- 検索ボックスに「Cline」と入力し、Cline をインストールする
- メニューバーに Cline のアイコンが表示されるので選択する

#### Cline の設定を行う

※ [Cline を使えるようにするまでの備忘録 #VSCode - Qiita](https://qiita.com/Myrune/items/3407e125e6f752a08c84)

- API Provider を選択し、Google Gemini を選択する。
- API Key を入力する
- Model を選択する
- Custom Instruction を入力する

Cline の Custom Instruction (カスタムインストラクション) は、Cline があなたからの指示をより深く理解するための情報を提供するためのもの。

#### Cline の権限設定

##### Auto-approve (自動承認)

- 機能: Cline がファイルへの変更、ターミナルコマンドの実行、ブラウザの使用などを行う際に、あなたに確認を求めるかどうかを設定します。
- 設定値:
  - オン (有効): Cline がアクションを実行する前に、あなたに確認を求めません。アクションは自動的に実行されます。
  - オフ (無効): Cline がアクションを実行する前に、必ずあなたに確認を求めます。
- 注意点:
  - オンの場合: 手間が省けますが、意図しない変更やコマンド実行が行われるリスクがあります。特に、信頼できないプロンプトや実験的なタスクを実行する際には注意が必要です。
  - オフの場合: 全てのアクションに対して確認が必要になるため、少し手間がかかりますが、セキュリティと意図しない変更を防ぐことができます。
- 推奨: 基本的にはオフ (無効) に設定し、必要に応じて一時的にオンにすることを推奨します。特に、Cline の動作に慣れていない場合は、オフにしておくことで安全に利用できます。

##### Read files and directories (ファイルとディレクトリの読み取り)

- 機能: Cline があなたのワークスペース内のファイルやディレクトリの内容を読み取ることを許可するかどうかを設定します。
- 設定値:
  - オン (有効): Cline は、プロンプトに関連するファイルの内容を読み取ったり、ディレクトリ構造を把握したりできます。これにより、コンテキストに基づいたより適切な提案やコード生成が可能になります。
  - オフ (無効): Cline は、ファイルやディレクトリの内容を読み取ることができません。プロンプトで明示的に指定された情報のみに基づいて動作します。
- 注意点:
  - オンの場合: Cline はより多くのコンテキストを理解できるため、高度な支援が期待できます。ただし、機密情報を含むファイルへのアクセスを許可することになるため、セキュリティ上の懸念がある場合はオフにすることを検討してください。
  - オフの場合: Cline の提案は一般的なものになりがちで、プロジェクト固有のコンテキストを考慮した支援は難しくなります。
- 推奨: 基本的にはオン (有効) に設定することで、Cline の能力を最大限に活用できます。ただし、機密情報を含むプロジェクトで使用する場合は、慎重に検討してください。

##### Edit files (ファイルの編集)

- 機能: Cline があなたのワークスペース内のファイルを編集することを許可するかどうかを設定します。
- 設定値:
  - オン (有効): Cline は、生成したコードをファイルに書き込んだり、既存のコードを修正したりできます。
  - オフ (無効): Cline は、ファイルの編集を行うことができません。生成されたコードはプレビュー表示のみとなり、手動でファイルに適用する必要があります。
- 注意点:
  - オンの場合: Cline が自動でコードを修正してくれるため、開発効率が向上します。ただし、意図しない変更が行われるリスクがあるため、Auto-approve の設定と合わせて慎重に検討する必要があります。
  - オフの場合: 全ての変更を手動で行う必要があるため、手間がかかりますが、意図しない変更を防ぐことができます。
- 推奨: Cline の動作に慣れるまではオフ (無効) に設定し、変更内容を常に確認するようにしましょう。Auto-approve をオンにする場合は、Edit files もオンにすることを検討できますが、リスクを十分に理解した上で設定してください。

##### Execute safe commands (安全なコマンドの実行)

- 機能: Cline がターミナルコマンドを実行することを許可するかどうかを設定します。ここでいう「安全なコマンド」は、ファイルシステムの変更やネットワークへのアクセスなど、システムに影響を与える可能性の低いコマンドを指します。
- 設定値:
  - オン (有効): Cline は、安全と判断されたターミナルコマンドを実行できます。例えば、ツールのバージョン確認などが考えられます。
  - オフ (無効): Cline は、一切のターミナルコマンドを実行できません。
- 注意点:
  - オンの場合: Cline が開発に必要な情報を自動的に取得したり、簡単なツールを実行したりできる場合があります。ただし、「安全なコマンド」の定義は Cline 内部で行われるため、予期しない動作をする可能性もゼロではありません。
  - オフの場合: ターミナル関連の機能は利用できません。
- 推奨: 基本的にはオフ (無効) に設定し、必要に応じて一時的にオンにすることを検討してください。特に、コマンド実行の意図を理解できない場合は、オフにしておくことが安全です。

##### Use the browser (ブラウザの使用)

- 機能: Cline がインターネットブラウザを操作することを許可するかどうかを設定します。これにより、Cline はウェブ検索を行ったり、特定のウェブサイトの内容に基づいて応答できます。
- 設定値:
  - オン (有効): Cline は、必要に応じてウェブブラウザを起動し、情報を収集できます。
  - オフ (無効): Cline は、ウェブブラウザを使用できません。
- 注意点:
  - オンの場合: Cline は最新の情報に基づいて応答したり、ドキュメントを検索したりできるため、より高度な支援が期待できます。ただし、意図しないウェブサイトへのアクセスや情報漏洩のリスクも考慮する必要があります。
  - オフの場合: 最新の情報やウェブ上のリソースを活用した支援は受けられません。
- 推奨: 情報収集能力を高めたい場合はオン (有効) にすることを検討できますが、セキュリティ上のリスクを理解した上で設定してください。

##### Use MCP Servers (MCP サーバーの使用)

- 機能: MCP (Model Collaboration Protocol) サーバーを利用するかどうかを設定します。MCP サーバーは、複数の AI モデルを連携させてより高度なタスクを実行するための仕組みです。
- 設定値:
  - オン (有効): Cline は、利用可能な MCP サーバーに接続し、複数の AI モデルを活用した処理を行う可能性があります。
  - オフ (無効): Cline は、MCP サーバーを使用しません。
- 注意点:
  - オンの場合: より複雑なタスクや、複数の専門知識を必要とするタスクで、より良い結果が得られる可能性があります。ただし、MCP サーバーの可用性や性能に依存する場合があります。
  - オフの場合: 単一の AI モデルによる処理となります。
- 推奨: Cline の高度な機能を試したい場合はオン (有効) にしてみると良いでしょう。MCP サーバーが利用可能な場合にのみ効果があります。

##### Max Requests (最大リクエスト数)

- 機能: Cline が同時に処理できるリクエストの最大数を設定します。
- 設定値: 整数値で指定します。
- 注意点:
  - 大きな値を設定した場合: 複数のタスクを同時に実行できるため、効率が向上する可能性があります。ただし、システムのリソースを大量に消費する可能性があり、VS Code の動作が遅くなることがあります。
  - 小さな値を設定した場合: 同時実行できるタスク数が制限されるため、処理に時間がかかる場合がありますが、システムへの負荷は軽減されます。
- 推奨: 通常はデフォルト値のままで問題ありません。もし、Cline の動作が遅いと感じる場合は値を小さくしたり、逆に複数のタスクを同時に処理したい場合は値を大きくしたりすることを検討してください。ただし、システムのリソース状況を考慮して適切な値を設定してください。

##### Enable notifications (通知を有効にする)

- 機能: Cline からの通知を受け取るかどうかを設定します。
- 設定値:
  - オン (有効): Cline がタスクの完了、エラー、提案などに関する通知を VS Code の通知領域に表示します。
  - オフ (無効): Cline からの通知は表示されません。
- 注意点:
  - オンの場合: Cline の動作状況や重要な情報を把握しやすくなります。
  - オフの場合: 通知を見逃す可能性があります。
- 推奨: 基本的にはオン (有効) に設定しておくことを推奨します。
