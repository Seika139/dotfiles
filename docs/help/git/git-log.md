# git log

```bash
git log [オプション] [リビジョン範囲] [[--] パス]
```

## リビジョン範囲

```bash
git log [commit]     # commit から到達できるコミットログ（履歴）を表示する。省略するとHEADからの履歴になる
git log foo bar ^baz # foo または bar から到達できるが baz から到達できないコミットログ（履歴）を表示する
git log foo..bar     # foo から bar までのコミットログを表示する。 git log ^foo bar と同等
```

## オプション

```bash
-p                             # 差分の中身を表示する。 -n や foo..bar などでログの範囲を制限しないとなぜかエラーを返す
-n / --max-count=n             # 出力するコミット数を n 個に制限する
--since=<date> --after=<date>  # 指定した日付よりも新しいコミットを表示
--until=<date> --before=<date> # 指定した日付よりも古いコミットを表示
--first-parent                 # マージコミットが表示されたら、最初の親コミットのみに従う。詳細は後述
```

## 消えた差分を見つける

`--first-parent` が「マージコミットが表示されたら最初の親コミットのみに従う」ことを利用して、コンフリクト解消などで消えた差分を簡単に見つけることができる。
つまり特定のブランチを追跡するときに、それ以外のコミットは無視されて、マージされた時に生じた差分として表示される。
「追加したはずの差分がどこかのコンフリクト解消で誤って消えてしまった」という状況のコミットも表示されるようになる。
図で見たい場合は英語だが <https://marcgg.com/blog/2015/08/04/git-first-parent-log/> がわかりやすい。
また、差分の詳しい中身を見る場合は `git log -p -m --first-parent` とする。

## 自作コマンド

### gcl

```bash
gcl commit1 commit2 [option] [path]
```

commit1 と commit2 の共通祖先を探す。
option は git log のオプションと同じ。
path を入力することで、その path に該当するファイルが変更されたコミットだけに絞り込むことができる。

### gl, gll, glr

- `gl`: git log をさらにシンプルに表示、直前10件
- `glr`: グラフ表示
- `gll` : ファイルごとの追加・削除行数を表示

※ `-- "*.vue"` : vueファイルの変更があるコミットのみを対象にする。などの絞り込みができる。
