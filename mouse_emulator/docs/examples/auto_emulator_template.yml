version: "1.1"
name: "template-demo"
description: "テンプレートマッチで開始ボタンを検出しクリックする例"
runtime:
  capture_interval: 0.4
  calibration:
    enabled: false
    preset:
      left: 120
      top: 80
      right: 1320
      bottom: 880
  controls:
    pause_toggle: "ctrl+p"
  logging:
    file: "logs/template_demo.log"
    mode: append
regions:
  - name: "main"
    left: 0.0
    top: 0.0
    right: 1.0
    bottom: 1.0
steps:
  - id: "wait_for_start"
    description: "スタートボタンが出るまで待機"
    watch:
      detector:
        type: "template"
        options:
          template_path: "../../sample_images/start_button.png"
          threshold: 0.75
          match_method: "TM_CCOEFF_NORMED"
          grayscale: true
      region: "main"
      interval: 0.4
      timeout: 10.0
      max_attempts: "infinite"
    conditions:
      op: "match"
      options:
        min_score: 0.75
    actions:
      - type: "click"
        options:
          target:
            use_detection: true
          button: "left"
      - type: "log"
        options:
          prefix: "[auto]"
          message: "start button clicked"
    transitions:
      success: "finish"
      timeout: "finish"
  - id: "finish"
    description: "終了ステップ"
    watch:
      detector:
        type: "null"
    conditions:
      op: "always"
    actions:
      - type: "log"
        options:
          prefix: "[auto]"
          message: "workflow finished"
